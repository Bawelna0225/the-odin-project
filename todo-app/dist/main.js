(()=>{function t(){e(),localStorage.setItem("task.lists",JSON.stringify(lists)),localStorage.setItem("task.selectedListId",selectedListId)}function e(){lists.forEach((t=>{const e=document.createElement("li");e.innerText=t.name,e.dataset.listId=t.id,t.id===selectedListId&&e.classList.add("active-list"),listsContainer.appendChild(e)}));const t=lists.find((t=>t.id===selectedListId));null===selectedListId?listDisplayContainer.style.display="none":(listDisplayContainer.style.display="",listTitleElement.innerHTML=`<i class="fas fa-tasks"></i> ${t.name}`,function(t){0===t.tasks.length?listDisplayContainer.style.backgroundSize="35%":listDisplayContainer.style.background="",t.tasks.forEach((t=>{const e=document.importNode(taskTemplate.content,!0),s=e.querySelector("input");s.id=t.id,s.checked=t.complete;const n=e.querySelector("label");n.htmlFor=t.id;const a=document.createElement("br");n.append(t.name,", ",t.date,a,t.description);const i=document.createElement("p");i.classList.add("edit"),i.addEventListener("click",(()=>editTask(t,n))),e.querySelector(".task").append(i),tasksContainer.appendChild(e)}))}(t))}newListForm.addEventListener("submit",(e=>{e.preventDefault();const s=newListInput.value;if(null===s||""===s)return;const n={id:Date.now().toString(),name:newListInput.value,tasks:[]};newListInput.value=null,lists.push(n),t()})),newTaskForm.addEventListener("submit",(e=>{e.preventDefault();const s=newTaskInput.value;if("Update Task"===document.querySelector(".container h2").textContent)return;if(null===s||""===s)return;const n={id:Date.now().toString(),name:newTaskInput.value,date:newTaskDate.value,priority:newTaskPriority.value,description:newTaskDescription.value,complete:!1};newTaskInput.value=null,lists.find((t=>t.id===selectedListId)).tasks.push(n),t()})),deleteListButton.addEventListener("click",(e=>{lists=lists.filter((t=>t.id!==selectedListId)),selectedListId=null,t()})),listsContainer.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(selectedListId=e.target.dataset.listId,t())})),tasksContainer.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(lists.find((t=>t.id===selectedListId)).tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,t())})),addButton.addEventListener("click",(()=>{newTaskForm.reset(),openOrCloseAddTaskForm(),modalOpen?(addButton.style.background="#2185d5",addButton.style.transform="rotate(45deg)"):(addButton.style.background="transparent",addButton.style.transform="rotate(0)")})),closeButton.addEventListener("click",(()=>{formContainer.style.transform="scale(0)",overlay.style.opacity=0,modalOpen=!1,addButton.style.background="transparent",addButton.style.transform="rotate(0)"})),formContainer.addEventListener("submit",(t=>{t.preventDefault(),openOrCloseAddTaskForm(),addButton.style.background="transparent",addButton.style.transform="rotate(0)",modalOpen=!1})),e()})();